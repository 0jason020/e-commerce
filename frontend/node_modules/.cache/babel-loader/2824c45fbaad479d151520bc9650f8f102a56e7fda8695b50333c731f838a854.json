{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\paccy\\\\frontend\\\\src\\\\pages\\\\CategoryPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useLocation } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CategoryPage = ({\n  addToCart,\n  isDealPage\n}) => {\n  _s();\n  const {\n    categoryName,\n    dealType\n  } = useParams();\n  const location = useLocation(); // Used to grab the search query (?q=...)\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Extract the search term from the URL (e.g., ?q=laptop)\n  const searchQuery = new URLSearchParams(location.search).get('q');\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setLoading(true);\n      let query = supabase.from('products').select('*');\n      if (searchQuery) {\n        // SEARCH LOGIC: Look for names that contain the search term (case-insensitive)\n        query = query.ilike('name', `%${searchQuery}%`);\n      } else if (isDealPage) {\n        // DEAL LOGIC: Filter by deal_type column\n        query = query.eq('deal_type', dealType);\n      } else {\n        // CATEGORY LOGIC: Filter by standard category\n        query = query.eq('category', categoryName);\n      }\n      const {\n        data,\n        error\n      } = await query;\n      if (!error) setProducts(data);\n      setLoading(false);\n    };\n    fetchProducts();\n  }, [categoryName, dealType, isDealPage, searchQuery]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '50px',\n      textAlign: 'center'\n    },\n    children: \"Searching MegaMart...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textTransform: 'capitalize',\n        marginBottom: '20px',\n        borderBottom: '2px solid #febd69',\n        display: 'inline-block',\n        paddingBottom: '5px'\n      },\n      children: searchQuery ? `Results for \"${searchQuery}\"` : isDealPage ? dealType.replace('_', ' ') : categoryName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), products.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '100px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No items found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Try searching for something else like \\\"Smartphone\\\" or \\\"Laptop\\\".\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: productGrid,\n      children: products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: productCard,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: product.image_url,\n          alt: product.name,\n          style: productImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: productTitle,\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: productPrice,\n            children: [\"RWF \", product.price.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addToCart(product),\n            style: addBtn,\n            children: \"Add to Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 18\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 16\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Styles ---\n_s(CategoryPage, \"X5QCvBT+A4YjlYZk8U5YkNwyO58=\", false, function () {\n  return [useParams, useLocation];\n});\n_c = CategoryPage;\nconst productGrid = {\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n  gap: '20px'\n};\nconst productCard = {\n  backgroundColor: '#fff',\n  borderRadius: '8px',\n  overflow: 'hidden',\n  boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n  transition: '0.3s'\n};\nconst productImage = {\n  width: '100%',\n  height: '180px',\n  objectFit: 'cover'\n};\nconst productTitle = {\n  fontSize: '14px',\n  height: '40px',\n  overflow: 'hidden',\n  marginBottom: '10px'\n};\nconst productPrice = {\n  color: '#B12704',\n  fontWeight: 'bold',\n  fontSize: '18px'\n};\nconst addBtn = {\n  width: '100%',\n  padding: '10px',\n  backgroundColor: '#febd69',\n  border: '1px solid #a88734',\n  borderRadius: '4px',\n  cursor: 'pointer'\n};\nexport default CategoryPage;\nvar _c;\n$RefreshReg$(_c, \"CategoryPage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useLocation","supabase","jsxDEV","_jsxDEV","CategoryPage","addToCart","isDealPage","_s","categoryName","dealType","location","products","setProducts","loading","setLoading","searchQuery","URLSearchParams","search","get","fetchProducts","query","from","select","ilike","eq","data","error","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","textTransform","marginBottom","borderBottom","display","paddingBottom","replace","length","productGrid","map","product","productCard","src","image_url","alt","name","productImage","productTitle","productPrice","price","toLocaleString","onClick","addBtn","id","_c","gridTemplateColumns","gap","backgroundColor","borderRadius","overflow","boxShadow","transition","width","height","objectFit","fontSize","color","fontWeight","border","cursor","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/paccy/frontend/src/pages/CategoryPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nconst CategoryPage = ({ addToCart, isDealPage }) => {\r\n  const { categoryName, dealType } = useParams();\r\n  const location = useLocation(); // Used to grab the search query (?q=...)\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Extract the search term from the URL (e.g., ?q=laptop)\r\n  const searchQuery = new URLSearchParams(location.search).get('q');\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setLoading(true);\r\n      let query = supabase.from('products').select('*');\r\n\r\n      if (searchQuery) {\r\n        // SEARCH LOGIC: Look for names that contain the search term (case-insensitive)\r\n        query = query.ilike('name', `%${searchQuery}%`);\r\n      } else if (isDealPage) {\r\n        // DEAL LOGIC: Filter by deal_type column\r\n        query = query.eq('deal_type', dealType);\r\n      } else {\r\n        // CATEGORY LOGIC: Filter by standard category\r\n        query = query.eq('category', categoryName);\r\n      }\r\n\r\n      const { data, error } = await query;\r\n      if (!error) setProducts(data);\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [categoryName, dealType, isDealPage, searchQuery]);\r\n\r\n  if (loading) return <div style={{ padding: '50px', textAlign: 'center' }}>Searching MegaMart...</div>;\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '1200px', margin: '0 auto' }}>\r\n      <h2 style={{ textTransform: 'capitalize', marginBottom: '20px', borderBottom: '2px solid #febd69', display: 'inline-block', paddingBottom: '5px' }}>\r\n        {searchQuery ? `Results for \"${searchQuery}\"` : (isDealPage ? dealType.replace('_', ' ') : categoryName)}\r\n      </h2>\r\n\r\n      {products.length === 0 ? (\r\n        <div style={{ textAlign: 'center', padding: '100px 0' }}>\r\n          <h3>No items found.</h3>\r\n          <p>Try searching for something else like \"Smartphone\" or \"Laptop\".</p>\r\n        </div>\r\n      ) : (\r\n        <div style={productGrid}>\r\n          {products.map((product) => (\r\n            <div key={product.id} style={productCard}>\r\n               <img src={product.image_url} alt={product.name} style={productImage} />\r\n               <div style={{ padding: '10px' }}>\r\n                 <h4 style={productTitle}>{product.name}</h4>\r\n                 <p style={productPrice}>RWF {product.price.toLocaleString()}</p>\r\n                 <button onClick={() => addToCart(product)} style={addBtn}>Add to Cart</button>\r\n               </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Styles ---\r\nconst productGrid = { display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '20px' };\r\nconst productCard = { backgroundColor: '#fff', borderRadius: '8px', overflow: 'hidden', boxShadow: '0 2px 8px rgba(0,0,0,0.1)', transition: '0.3s' };\r\nconst productImage = { width: '100%', height: '180px', objectFit: 'cover' };\r\nconst productTitle = { fontSize: '14px', height: '40px', overflow: 'hidden', marginBottom: '10px' };\r\nconst productPrice = { color: '#B12704', fontWeight: 'bold', fontSize: '18px' };\r\nconst addBtn = { width: '100%', padding: '10px', backgroundColor: '#febd69', border: '1px solid #a88734', borderRadius: '4px', cursor: 'pointer' };\r\n\r\nexport default CategoryPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SAASC,QAAQ,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,MAAMC,YAAY,GAAGA,CAAC;EAAEC,SAAS;EAAEC;AAAW,CAAC,KAAK;EAAAC,EAAA;EAClD,MAAM;IAAEC,YAAY;IAAEC;EAAS,CAAC,GAAGV,SAAS,CAAC,CAAC;EAC9C,MAAMW,QAAQ,GAAGV,WAAW,CAAC,CAAC,CAAC,CAAC;EAChC,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;;EAE5C;EACA,MAAMiB,WAAW,GAAG,IAAIC,eAAe,CAACN,QAAQ,CAACO,MAAM,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC;EAEjErB,SAAS,CAAC,MAAM;IACd,MAAMsB,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChCL,UAAU,CAAC,IAAI,CAAC;MAChB,IAAIM,KAAK,GAAGnB,QAAQ,CAACoB,IAAI,CAAC,UAAU,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC;MAEjD,IAAIP,WAAW,EAAE;QACf;QACAK,KAAK,GAAGA,KAAK,CAACG,KAAK,CAAC,MAAM,EAAE,IAAIR,WAAW,GAAG,CAAC;MACjD,CAAC,MAAM,IAAIT,UAAU,EAAE;QACrB;QACAc,KAAK,GAAGA,KAAK,CAACI,EAAE,CAAC,WAAW,EAAEf,QAAQ,CAAC;MACzC,CAAC,MAAM;QACL;QACAW,KAAK,GAAGA,KAAK,CAACI,EAAE,CAAC,UAAU,EAAEhB,YAAY,CAAC;MAC5C;MAEA,MAAM;QAAEiB,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMN,KAAK;MACnC,IAAI,CAACM,KAAK,EAAEd,WAAW,CAACa,IAAI,CAAC;MAC7BX,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC;IAEDK,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACX,YAAY,EAAEC,QAAQ,EAAEH,UAAU,EAAES,WAAW,CAAC,CAAC;EAErD,IAAIF,OAAO,EAAE,oBAAOV,OAAA;IAAKwB,KAAK,EAAE;MAAEC,OAAO,EAAE,MAAM;MAAEC,SAAS,EAAE;IAAS,CAAE;IAAAC,QAAA,EAAC;EAAqB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAErG,oBACE/B,OAAA;IAAKwB,KAAK,EAAE;MAAEC,OAAO,EAAE,MAAM;MAAEO,QAAQ,EAAE,QAAQ;MAAEC,MAAM,EAAE;IAAS,CAAE;IAAAN,QAAA,gBACpE3B,OAAA;MAAIwB,KAAK,EAAE;QAAEU,aAAa,EAAE,YAAY;QAAEC,YAAY,EAAE,MAAM;QAAEC,YAAY,EAAE,mBAAmB;QAAEC,OAAO,EAAE,cAAc;QAAEC,aAAa,EAAE;MAAM,CAAE;MAAAX,QAAA,EAChJf,WAAW,GAAG,gBAAgBA,WAAW,GAAG,GAAIT,UAAU,GAAGG,QAAQ,CAACiC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,GAAGlC;IAAa;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtG,CAAC,EAEJvB,QAAQ,CAACgC,MAAM,KAAK,CAAC,gBACpBxC,OAAA;MAAKwB,KAAK,EAAE;QAAEE,SAAS,EAAE,QAAQ;QAAED,OAAO,EAAE;MAAU,CAAE;MAAAE,QAAA,gBACtD3B,OAAA;QAAA2B,QAAA,EAAI;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACxB/B,OAAA;QAAA2B,QAAA,EAAG;MAA+D;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnE,CAAC,gBAEN/B,OAAA;MAAKwB,KAAK,EAAEiB,WAAY;MAAAd,QAAA,EACrBnB,QAAQ,CAACkC,GAAG,CAAEC,OAAO,iBACpB3C,OAAA;QAAsBwB,KAAK,EAAEoB,WAAY;QAAAjB,QAAA,gBACtC3B,OAAA;UAAK6C,GAAG,EAAEF,OAAO,CAACG,SAAU;UAACC,GAAG,EAAEJ,OAAO,CAACK,IAAK;UAACxB,KAAK,EAAEyB;QAAa;UAAArB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACvE/B,OAAA;UAAKwB,KAAK,EAAE;YAAEC,OAAO,EAAE;UAAO,CAAE;UAAAE,QAAA,gBAC9B3B,OAAA;YAAIwB,KAAK,EAAE0B,YAAa;YAAAvB,QAAA,EAAEgB,OAAO,CAACK;UAAI;YAAApB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC5C/B,OAAA;YAAGwB,KAAK,EAAE2B,YAAa;YAAAxB,QAAA,GAAC,MAAI,EAACgB,OAAO,CAACS,KAAK,CAACC,cAAc,CAAC,CAAC;UAAA;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAChE/B,OAAA;YAAQsD,OAAO,EAAEA,CAAA,KAAMpD,SAAS,CAACyC,OAAO,CAAE;YAACnB,KAAK,EAAE+B,MAAO;YAAA5B,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3E,CAAC;MAAA,GANCY,OAAO,CAACa,EAAE;QAAA5B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAOf,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;;AAED;AAAA3B,EAAA,CAhEMH,YAAY;EAAA,QACmBL,SAAS,EAC3BC,WAAW;AAAA;AAAA4D,EAAA,GAFxBxD,YAAY;AAiElB,MAAMwC,WAAW,GAAG;EAAEJ,OAAO,EAAE,MAAM;EAAEqB,mBAAmB,EAAE,uCAAuC;EAAEC,GAAG,EAAE;AAAO,CAAC;AAClH,MAAMf,WAAW,GAAG;EAAEgB,eAAe,EAAE,MAAM;EAAEC,YAAY,EAAE,KAAK;EAAEC,QAAQ,EAAE,QAAQ;EAAEC,SAAS,EAAE,2BAA2B;EAAEC,UAAU,EAAE;AAAO,CAAC;AACpJ,MAAMf,YAAY,GAAG;EAAEgB,KAAK,EAAE,MAAM;EAAEC,MAAM,EAAE,OAAO;EAAEC,SAAS,EAAE;AAAQ,CAAC;AAC3E,MAAMjB,YAAY,GAAG;EAAEkB,QAAQ,EAAE,MAAM;EAAEF,MAAM,EAAE,MAAM;EAAEJ,QAAQ,EAAE,QAAQ;EAAE3B,YAAY,EAAE;AAAO,CAAC;AACnG,MAAMgB,YAAY,GAAG;EAAEkB,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,MAAM;EAAEF,QAAQ,EAAE;AAAO,CAAC;AAC/E,MAAMb,MAAM,GAAG;EAAEU,KAAK,EAAE,MAAM;EAAExC,OAAO,EAAE,MAAM;EAAEmC,eAAe,EAAE,SAAS;EAAEW,MAAM,EAAE,mBAAmB;EAAEV,YAAY,EAAE,KAAK;EAAEW,MAAM,EAAE;AAAU,CAAC;AAElJ,eAAevE,YAAY;AAAC,IAAAwD,EAAA;AAAAgB,YAAA,CAAAhB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}