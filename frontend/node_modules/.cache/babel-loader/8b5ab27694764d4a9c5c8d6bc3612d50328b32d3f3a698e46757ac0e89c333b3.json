{"ast":null,"code":"import { serve } from \"https://deno.land/std@0.168.0/http/server.ts\";\n\n// Deno.env.get is how we safely access your API key\nconst RESEND_API_KEY = Deno.env.get('RESEND_API_KEY');\nserve(async req => {\n  try {\n    // This 'record' comes from the Supabase Webhook payload\n    const {\n      record\n    } = await req.json();\n    const res = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${RESEND_API_KEY}`\n      },\n      body: JSON.stringify({\n        from: 'MegaMart <onboarding@resend.dev>',\n        to: [record.user_email],\n        subject: `Order Confirmation: #${record.id.slice(0, 8)}`,\n        html: `\n          <div style=\"font-family: sans-serif; padding: 20px;\">\n            <h1 style=\"color: #008ECC;\">MegaMart</h1>\n            <p>Your payment of <b>RWF ${record.total_amount.toLocaleString()}</b> was successful!</p>\n            <p><b>Order ID:</b> ${record.id}</p>\n            <p><b>Shipping to:</b> ${record.shipping_address}</p>\n            <hr />\n            <p>We are now preparing your items for delivery.</p>\n          </div>\n        `\n      })\n    });\n    const data = await res.json();\n    return new Response(JSON.stringify(data), {\n      status: 200\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({\n      error: error.message\n    }), {\n      status: 500\n    });\n  }\n});","map":{"version":3,"names":["serve","RESEND_API_KEY","Deno","env","get","req","record","json","res","fetch","method","headers","body","JSON","stringify","from","to","user_email","subject","id","slice","html","total_amount","toLocaleString","shipping_address","data","Response","status","error","message"],"sources":["C:/Users/HP/Desktop/paccy/frontend/src/index.js"],"sourcesContent":["import { serve } from \"https://deno.land/std@0.168.0/http/server.ts\"\r\n\r\n// Deno.env.get is how we safely access your API key\r\nconst RESEND_API_KEY = Deno.env.get('RESEND_API_KEY')\r\n\r\nserve(async (req) => {\r\n  try {\r\n    // This 'record' comes from the Supabase Webhook payload\r\n    const { record } = await req.json()\r\n\r\n    const res = await fetch('https://api.resend.com/emails', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${RESEND_API_KEY}`,\r\n      },\r\n      body: JSON.stringify({\r\n        from: 'MegaMart <onboarding@resend.dev>', \r\n        to: [record.user_email],\r\n        subject: `Order Confirmation: #${record.id.slice(0, 8)}`,\r\n        html: `\r\n          <div style=\"font-family: sans-serif; padding: 20px;\">\r\n            <h1 style=\"color: #008ECC;\">MegaMart</h1>\r\n            <p>Your payment of <b>RWF ${record.total_amount.toLocaleString()}</b> was successful!</p>\r\n            <p><b>Order ID:</b> ${record.id}</p>\r\n            <p><b>Shipping to:</b> ${record.shipping_address}</p>\r\n            <hr />\r\n            <p>We are now preparing your items for delivery.</p>\r\n          </div>\r\n        `,\r\n      }),\r\n    })\r\n\r\n    const data = await res.json()\r\n    return new Response(JSON.stringify(data), { status: 200 })\r\n\r\n  } catch (error) {\r\n    return new Response(JSON.stringify({ error: error.message }), { status: 500 })\r\n  }\r\n})"],"mappings":"AAAA,SAASA,KAAK,QAAQ,8CAA8C;;AAEpE;AACA,MAAMC,cAAc,GAAGC,IAAI,CAACC,GAAG,CAACC,GAAG,CAAC,gBAAgB,CAAC;AAErDJ,KAAK,CAAC,MAAOK,GAAG,IAAK;EACnB,IAAI;IACF;IACA,MAAM;MAAEC;IAAO,CAAC,GAAG,MAAMD,GAAG,CAACE,IAAI,CAAC,CAAC;IAEnC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,+BAA+B,EAAE;MACvDC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAE,UAAUV,cAAc;MAC3C,CAAC;MACDW,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBC,IAAI,EAAE,kCAAkC;QACxCC,EAAE,EAAE,CAACV,MAAM,CAACW,UAAU,CAAC;QACvBC,OAAO,EAAE,wBAAwBZ,MAAM,CAACa,EAAE,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;QACxDC,IAAI,EAAE;AACd;AACA;AACA,wCAAwCf,MAAM,CAACgB,YAAY,CAACC,cAAc,CAAC,CAAC;AAC5E,kCAAkCjB,MAAM,CAACa,EAAE;AAC3C,qCAAqCb,MAAM,CAACkB,gBAAgB;AAC5D;AACA;AACA;AACA;MACM,CAAC;IACH,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAG,MAAMjB,GAAG,CAACD,IAAI,CAAC,CAAC;IAC7B,OAAO,IAAImB,QAAQ,CAACb,IAAI,CAACC,SAAS,CAACW,IAAI,CAAC,EAAE;MAAEE,MAAM,EAAE;IAAI,CAAC,CAAC;EAE5D,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,OAAO,IAAIF,QAAQ,CAACb,IAAI,CAACC,SAAS,CAAC;MAAEc,KAAK,EAAEA,KAAK,CAACC;IAAQ,CAAC,CAAC,EAAE;MAAEF,MAAM,EAAE;IAAI,CAAC,CAAC;EAChF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}